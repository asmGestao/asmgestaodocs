<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1e3a5f">
    <title>ASM Gest√£o Cl√≠nica - Sistema Unificado</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --azul-marinho: #1e3a5f;
            --dourado: #c9a227;
            --cinza-claro: #f5f5f5;
            --branco: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--azul-marinho) 0%, #2c4a6e 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: var(--branco);
            margin-bottom: 20px;
            padding: 15px;
        }
        
        .header h1 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }
        
        .header h2 {
            font-size: 0.9rem;
            color: var(--dourado);
            font-weight: normal;
        }
        
        /* TABS */
        .tabs-container {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .tabs {
            display: flex;
            gap: 8px;
            min-width: max-content;
        }
        
        .tab {
            padding: 10px 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 0.8rem;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: var(--dourado);
            color: var(--azul-marinho);
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-card {
            background: var(--branco);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }
        
        .form-title {
            color: var(--azul-marinho);
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--dourado);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--dourado);
            border-radius: 2px;
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            color: var(--azul-marinho);
            margin-bottom: 6px;
            font-size: 0.85rem;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 0.95rem;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--dourado);
            box-shadow: 0 0 0 3px rgba(201, 162, 39, 0.2);
        }
        
        input[type="date"].form-input,
        input[type="time"].form-input,
        input[type="number"].form-input {
            width: 100%;
            max-width: 100%;
            padding: 8px 10px;
            font-size: 0.9rem;
        }
        
        .prof-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .prof-row-3 {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 10px;
        }
        
        .prof-row-4 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 10px;
        }
        
        .textarea-group {
            margin-bottom: 15px;
        }
        
        .textarea-group label {
            display: block;
            font-size: 0.85rem;
            color: var(--azul-marinho);
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .textarea-group textarea {
            width: 100%;
            min-height: 80px;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 0.95rem;
            resize: vertical;
            font-family: inherit;
        }
        
        .textarea-group textarea:focus {
            outline: none;
            border-color: var(--dourado);
        }
        
        .checkbox-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid #dee2e6;
            cursor: pointer;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--azul-marinho);
            cursor: pointer;
        }
        
        .checkbox-item label {
            cursor: pointer;
            font-size: 0.9rem;
            color: #444;
            margin: 0;
        }
        
        .radio-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid #dee2e6;
            cursor: pointer;
        }
        
        .radio-item input[type="radio"] {
            width: 20px;
            height: 20px;
            accent-color: var(--azul-marinho);
            cursor: pointer;
        }
        
        .radio-item label {
            cursor: pointer;
            font-size: 0.9rem;
            color: #444;
            margin: 0;
        }
        
        .escala-dor {
            background: var(--cinza-claro);
            padding: 20px;
            border-radius: 15px;
            margin-top: 10px;
            border-left: 4px solid var(--dourado);
        }
        
        .escala-dor h4 {
            color: var(--azul-marinho);
            margin-bottom: 15px;
            font-size: 0.9rem;
            text-align: center;
        }
        
        .escala-numeros {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .numero-dor {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            font-size: 0.9rem;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        
        .numero-dor:active {
            transform: scale(0.95);
        }
        
        .numero-dor.selected {
            background: var(--azul-marinho);
            color: white;
            border-color: var(--azul-marinho);
            transform: scale(1.1);
        }
        
        .numero-dor.dor-leve.selected { background: #4caf50; border-color: #4caf50; }
        .numero-dor.dor-media.selected { background: #ff9800; border-color: #ff9800; }
        .numero-dor.dor-intensa.selected { background: #f44336; border-color: #f44336; }
        
        .escala-linha {
            height: 4px;
            background: linear-gradient(to right, #4caf50 0%, #ff9800 50%, #f44336 100%);
            border-radius: 2px;
            margin: 0 17px;
        }
        
        .escala-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.75rem;
            color: #666;
        }
        
        .estrela-dor-container {
            background: var(--cinza-claro);
            padding: 20px;
            border-radius: 15px;
            margin-top: 10px;
            border-left: 4px solid var(--dourado);
        }
        
        .estrela-dor-container h4 {
            color: var(--azul-marinho);
            margin-bottom: 15px;
            font-size: 0.9rem;
            text-align: center;
        }
        
        .regioes-dor {
            display: grid;
            gap: 15px;
        }
        
        .regiao-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
        }
        
        .regiao-item h5 {
            color: var(--azul-marinho);
            margin-bottom: 15px;
            font-size: 1rem;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--dourado);
        }
        
        .movimentos-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .movimento-item {
            background: var(--cinza-claro);
            padding: 12px;
            border-radius: 10px;
        }
        
        .movimento-item h6 {
            color: #333;
            font-size: 0.85rem;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .movimento-botoes {
            display: flex;
            gap: 5px;
        }
        
        .btn-dor {
            flex: 1;
            padding: 10px 5px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        
        .btn-dor:active {
            transform: scale(0.95);
        }
        
        .btn-dor.selected-com-dor {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .btn-dor.selected-sem-dor {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .captores-grid {
            display: grid;
            gap: 12px;
        }
        
        .captor-item {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
        }
        
        .captor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .captor-nome {
            font-weight: 600;
            color: var(--azul-marinho);
            font-size: 0.95rem;
        }
        
        .captor-botoes {
            display: flex;
            gap: 8px;
        }
        
        .btn-captor {
            padding: 8px 16px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        
        .btn-captor:active {
            transform: scale(0.95);
        }
        
        .btn-captor.selected-positivo {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .btn-captor.selected-negativo {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .captor-obs {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-top: 8px;
        }
        
        .assinatura-section {
            background: var(--cinza-claro);
            padding: 20px;
            border-radius: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--dourado);
        }
        
        .assinatura-section h4 {
            color: var(--azul-marinho);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .signature-area {
            background: white;
            border: 2px dashed var(--azul-marinho);
            border-radius: 10px;
            position: relative;
        }
        
        .signature-pad {
            width: 100%;
            height: 150px;
            border-radius: 10px;
            touch-action: none;
            display: block;
        }
        
        .signature-label {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: #999;
            font-size: 0.85rem;
            pointer-events: none;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            flex: 1;
            min-width: 100px;
            max-width: 150px;
            padding: 15px 20px;
            border: none;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--azul-marinho), #2c4a6e);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }
        
        .btn-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 0.75rem;
            flex: none;
        }
        
        .footer {
            text-align: center;
            color: rgba(255,255,255,0.7);
            font-size: 0.75rem;
            margin-top: 30px;
            padding: 20px;
        }
        
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #333;
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            opacity: 0;
            transition: all 0.3s;
            z-index: 9999;
            font-size: 0.9rem;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        .evolucao-item {
            background: var(--cinza-claro);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid var(--dourado);
        }
        
        .evolucao-header {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .evolucao-header input {
            flex: 1;
        }
        
        .paciente-search {
            background: var(--cinza-claro);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .paciente-list {
            max-height: 200px;
            overflow-y: auto;
            background: white;
            border-radius: 10px;
            margin-top: 10px;
        }
        
        .paciente-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .paciente-item:hover {
            background: var(--cinza-claro);
        }
        
        .paciente-item:last-child {
            border-bottom: none;
        }
        
        .contrato-texto {
            background: var(--cinza-claro);
            padding: 20px;
            border-radius: 10px;
            font-size: 0.9rem;
            line-height: 1.6;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        
        .contrato-texto p {
            margin-bottom: 10px;
        }
        
        @media (max-width: 600px) {
            .prof-row, .prof-row-3, .prof-row-4 {
                grid-template-columns: 1fr;
            }
            .movimentos-grid {
                grid-template-columns: 1fr;
            }
            .escala-numeros {
                justify-content: center;
            }
            .numero-dor {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            .tabs {
                gap: 5px;
            }
            .tab {
                padding: 8px 12px;
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• ASM Gest√£o Cl√≠nica</h1>
            <h2>Sistema Unificado de Documentos</h2>
        </div>
        
        <div class="tabs-container">
            <div class="tabs">
                <button class="tab active" onclick="openTab('avaliacao')">Avalia√ß√£o</button>
                <button class="tab" onclick="openTab('evolucao')">Evolu√ß√£o</button>
                <button class="tab" onclick="openTab('contrato')">Contrato</button>
                <button class="tab" onclick="openTab('recibo')">Recibo</button>
                <button class="tab" onclick="openTab('tcle-imagem')">TCLE Imagem</button>
                <button class="tab" onclick="openTab('tcle-tratamento')">TCLE Tratamento</button>
                <button class="tab" onclick="openTab('atestado')">Atestado</button>
                <button class="tab" onclick="openTab('reembolso')">Reembolso</button>
                <button class="tab" onclick="openTab('alta')">Alta</button>
                <button class="tab" onclick="openTab('comparecimento')">Comparecimento</button>
                <button class="tab" onclick="openTab('encaminhamento')">Encaminhamento</button>
            </div>
        </div>

        <!-- ABA AVALIA√á√ÉO - ORIGINAL INTACTO -->
        <div id="avaliacao" class="tab-content active">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="av-nomeFisio" placeholder="Nome completo">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="av-crefito" placeholder="N¬∫ do CREFITO">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente</div>
                <div class="prof-row-3">
                    <div class="form-group">
                        <label class="form-label">Nome Completo</label>
                        <input type="text" class="form-input" id="av-nomePaciente" placeholder="Nome completo">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Idade</label>
                        <input type="number" class="form-input" id="av-idade" placeholder="Anos">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data Avalia√ß√£o</label>
                        <input type="date" class="form-input" id="av-dataAvaliacao">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Profiss√£o</label>
                    <input type="text" class="form-input" id="av-profissao" placeholder="Profiss√£o do paciente">
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìù Queixa Principal</div>
                <div class="textarea-group">
                    <textarea id="av-queixaPrincipal" placeholder="Descreva a queixa principal do paciente..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìñ Evolu√ß√£o dos Sintomas</div>
                <div class="textarea-group">
                    <label>Como come√ßou?</label>
                    <textarea id="av-comoComecou" placeholder="Descreva como os sintomas iniciaram..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>Quando come√ßou?</label>
                    <textarea id="av-quandoComecou" placeholder="Data/Per√≠odo de in√≠cio dos sintomas..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üò£ Escala Num√©rica da Dor</div>
                <div class="escala-dor">
                    <h4>Toque no n√∫mero correspondente √† dor (0 a 10)</h4>
                    <div class="escala-numeros">
                        <button type="button" class="numero-dor dor-leve" data-valor="0" onclick="selecionarDor(this)">0</button>
                        <button type="button" class="numero-dor dor-leve" data-valor="1" onclick="selecionarDor(this)">1</button>
                        <button type="button" class="numero-dor dor-leve" data-valor="2" onclick="selecionarDor(this)">2</button>
                        <button type="button" class="numero-dor dor-leve" data-valor="3" onclick="selecionarDor(this)">3</button>
                        <button type="button" class="numero-dor dor-media" data-valor="4" onclick="selecionarDor(this)">4</button>
                        <button type="button" class="numero-dor dor-media" data-valor="5" onclick="selecionarDor(this)">5</button>
                        <button type="button" class="numero-dor dor-media" data-valor="6" onclick="selecionarDor(this)">6</button>
                        <button type="button" class="numero-dor dor-intensa" data-valor="7" onclick="selecionarDor(this)">7</button>
                        <button type="button" class="numero-dor dor-intensa" data-valor="8" onclick="selecionarDor(this)">8</button>
                        <button type="button" class="numero-dor dor-intensa" data-valor="9" onclick="selecionarDor(this)">9</button>
                        <button type="button" class="numero-dor dor-intensa" data-valor="10" onclick="selecionarDor(this)">10</button>
                    </div>
                    <div class="escala-linha"></div>
                    <div class="escala-labels">
                        <span>Sem dor</span>
                        <span>Dor leve</span>
                        <span>Dor moderada</span>
                        <span>Dor intensa</span>
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìç Extens√£o da Dor</div>
                <div class="textarea-group">
                    <textarea id="av-extensaoDor" placeholder="Descreva a extens√£o da dor..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üíä Tratamentos Anteriores</div>
                <div class="textarea-group">
                    <label>Medica√ß√£o</label>
                    <textarea id="av-medicacao" placeholder="Medica√ß√µes em uso..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>Cirurgias</label>
                    <textarea id="av-cirurgias" placeholder="Hist√≥rico de cirurgias..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>Traumas</label>
                    <textarea id="av-traumas" placeholder="Hist√≥rico de traumas..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üîç Caracter√≠sticas da Dor</div>
                <div class="textarea-group">
                    <label>Frequ√™ncia da dor</label>
                    <textarea id="av-frequenciaDor" placeholder="Constante, intermitente, etc..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>O que piora a dor?</label>
                    <textarea id="av-pioraDor" placeholder="Fatores que agravam a dor..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>O que melhora a dor?</label>
                    <textarea id="av-melhoraDor" placeholder="Fatores que aliviam a dor..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üåô Quest√µes Viscerais</div>
                <div class="checkbox-group">
                    <label class="checkbox-item">
                        <input type="checkbox" id="av-acordaDor">
                        <label for="av-acordaDor">Acorda com dor?</label>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" id="av-dormeDor">
                        <label for="av-dormeDor">Dorme com dor?</label>
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" id="av-dormeBem">
                        <label for="av-dormeBem">Dorme bem?</label>
                    </label>
                </div>
                <div class="textarea-group">
                    <label>Posi√ß√£o de dormir</label>
                    <textarea id="av-posicaoDormir" placeholder="Posi√ß√£o habitual de sono..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üö´ Contra-indica√ß√£o / Exames</div>
                <div class="textarea-group">
                    <textarea id="av-contraindicacao" placeholder="Contra-indica√ß√µes e exames de imagem..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">ü•ó Condi√ß√µes Gerais</div>
                <div class="textarea-group">
                    <label>Alimenta√ß√£o</label>
                    <textarea id="av-alimentacao" placeholder="H√°bitos alimentares..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>Atividade F√≠sica</label>
                    <textarea id="av-atividadeFisica" placeholder="Pr√°tica de atividades f√≠sicas..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>Emocional</label>
                    <textarea id="av-emocional" placeholder="Aspectos emocionais..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üëÅÔ∏è Inspe√ß√£o</div>
                <div class="textarea-group">
                    <label>Inspe√ß√£o Est√°tica</label>
                    <textarea id="av-inspecaoEstatica" placeholder="Observa√ß√µes da inspe√ß√£o est√°tica..."></textarea>
                </div>
                <div class="textarea-group">
                    <label>Inspe√ß√£o Din√¢mica</label>
                    <textarea id="av-inspecaoDinamica" placeholder="Observa√ß√µes da inspe√ß√£o din√¢mica..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚≠ê Estrela da Dor</div>
                <div class="estrela-dor-container">
                    <h4>Avalia√ß√£o dos Movimentos (Toque nos bot√µes)</h4>
                    <div class="regioes-dor">
                        <div class="regiao-item">
                            <h5>Regi√£o Lombar</h5>
                            <div class="movimentos-grid">
                                <div class="movimento-item">
                                    <h6>Flex√£o (F)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Extens√£o (E)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Incl. Esq (Se)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Incl. Dir (Sd)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Rota√ß√£o Esq (Re)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Rota√ß√£o Dir (Rd)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="regiao-item">
                            <h5>Regi√£o Tor√°cica</h5>
                            <div class="movimentos-grid">
                                <div class="movimento-item">
                                    <h6>Flex√£o (F)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Extens√£o (E)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Incl. Esq (Se)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Incl. Dir (Sd)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Rota√ß√£o Esq (Re)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Rota√ß√£o Dir (Rd)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="regiao-item">
                            <h5>Regi√£o Cervical</h5>
                            <div class="movimentos-grid">
                                <div class="movimento-item">
                                    <h6>Flex√£o (F)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Extens√£o (E)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Incl. Esq (Se)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Incl. Dir (Sd)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Rota√ß√£o Esq (Re)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                                <div class="movimento-item">
                                    <h6>Rota√ß√£o Dir (Rd)</h6>
                                    <div class="movimento-botoes">
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Com dor</button>
                                        <button type="button" class="btn-dor" onclick="toggleDor(this)">Sem dor</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üèÉ Diagn√≥stico por Exerc√≠cio</div>
                <div class="textarea-group">
                    <textarea id="av-diagnosticoExercicio" placeholder="Resultados dos testes de exerc√≠cio repetitivo..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üéØ Captores Posturais</div>
                <div class="captores-grid">
                    <div class="captor-item">
                        <div class="captor-header">
                            <span class="captor-nome">Olho</span>
                            <div class="captor-botoes">
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'positivo')">Positivo</button>
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'negativo')">Negativo</button>
                            </div>
                        </div>
                        <input type="text" class="captor-obs" placeholder="Observa√ß√µes...">
                    </div>
                    
                    <div class="captor-item">
                        <div class="captor-header">
                            <span class="captor-nome">ATM</span>
                            <div class="captor-botoes">
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'positivo')">Positivo</button>
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'negativo')">Negativo</button>
                            </div>
                        </div>
                        <input type="text" class="captor-obs" placeholder="Observa√ß√µes...">
                    </div>
                    
                    <div class="captor-item">
                        <div class="captor-header">
                            <span class="captor-nome">P√©</span>
                            <div class="captor-botoes">
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'positivo')">Positivo</button>
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'negativo')">Negativo</button>
                            </div>
                        </div>
                        <input type="text" class="captor-obs" placeholder="Observa√ß√µes...">
                    </div>
                    
                    <div class="captor-item">
                        <div class="captor-header">
                            <span class="captor-nome">Cicatrizes</span>
                            <div class="captor-botoes">
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'positivo')">Positivo</button>
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'negativo')">Negativo</button>
                            </div>
                        </div>
                        <input type="text" class="captor-obs" placeholder="Observa√ß√µes...">
                    </div>
                    
                    <div class="captor-item">
                        <div class="captor-header">
                            <span class="captor-nome">V√≠sceras</span>
                            <div class="captor-botoes">
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'positivo')">Positivo</button>
                                <button type="button" class="btn-captor" onclick="toggleCaptor(this, 'negativo')">Negativo</button>
                            </div>
                        </div>
                        <input type="text" class="captor-obs" placeholder="Observa√ß√µes...">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üß† Testes Neurol√≥gicos</div>
                <div class="textarea-group">
                    <textarea id="av-testesNeuro" placeholder="Descreva os testes realizados e seus resultados..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üéØ Objetivos do Tratamento</div>
                <div class="textarea-group">
                    <textarea id="av-objetivos" placeholder="Objetivos terap√™uticos estabelecidos..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="av-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('av')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarAvaliacao()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFAvaliacao()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppAvaliacao()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA EVOLU√á√ÉO -->
        <div id="evolucao" class="tab-content">
            <div class="form-card">
                <div class="form-title">üîç Buscar Paciente</div>
                <div class="paciente-search">
                    <input type="text" class="form-input" id="ev-busca" placeholder="Digite o nome do paciente..." oninput="buscarPaciente()">
                    <div class="paciente-list" id="ev-listaPacientes"></div>
                </div>
            </div>
            
            <div class="form-card" id="ev-dadosPaciente" style="display:none;">
                <div class="form-title">üë§ Dados do Paciente</div>
                <div class="prof-row-3">
                    <div class="form-group">
                        <label class="form-label">Nome Completo</label>
                        <input type="text" class="form-input" id="ev-nomePaciente" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="ev-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Idade</label>
                        <input type="number" class="form-input" id="ev-idade">
                    </div>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Profiss√£o</label>
                        <input type="text" class="form-input" id="ev-profissao">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="text" class="form-input" id="ev-telefone">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Endere√ßo</label>
                    <input type="text" class="form-input" id="ev-endereco">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Diagn√≥stico Cin√©tico-Funcional</label>
                        <input type="text" class="form-input" id="ev-diagnostico">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data Primeiro Atendimento</label>
                        <input type="date" class="form-input" id="ev-dataInicio">
                    </div>
                </div>
            </div>
            
            <div id="ev-evolucoes">
                <!-- Evolu√ß√µes 1-10 geradas via JS -->
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="ev-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('ev')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarEvolucao()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFEvolucao()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppEvolucao()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA CONTRATO -->
        <div id="contrato" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="ct-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="ct-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Contratante</div>
                <div class="form-group">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" class="form-input" id="ct-nomeContratante">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="ct-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">RG</label>
                        <input type="text" class="form-input" id="ct-rg">
                    </div>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-input" id="ct-dataNasc">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefone/WhatsApp</label>
                        <input type="text" class="form-input" id="ct-telefone">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Endere√ßo</label>
                    <input type="text" class="form-input" id="ct-endereco">
                </div>
                <div class="form-group">
                    <label class="form-label">E-mail</label>
                    <input type="email" class="form-input" id="ct-email">
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üè• Dados Cl√≠nicos</div>
                <div class="form-group">
                    <label class="form-label">Queixa Principal</label>
                    <textarea class="form-input" id="ct-queixa" rows="3"></textarea>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Diagn√≥stico M√©dico/CID</label>
                        <input type="text" class="form-input" id="ct-diagnosticoMed">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Diagn√≥stico Fisioterap√™utico</label>
                        <input type="text" class="form-input" id="ct-diagnosticoFisio">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìã Modalidade e Valores</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Modalidade</label>
                        <select class="form-select" id="ct-modalidade">
                            <option value="">Selecione...</option>
                            <option value="clinica">Cl√≠nica/Consult√≥rio</option>
                            <option value="domiciliar">Domiciliar</option>
                            <option value="online">Online/Teleatendimento</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Valor por Sess√£o (R$)</label>
                        <input type="number" class="form-input" id="ct-valorSessao" step="0.01">
                    </div>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Frequ√™ncia (sess√µes/semana)</label>
                        <input type="number" class="form-input" id="ct-frequencia">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Dura√ß√£o da Sess√£o (min)</label>
                        <input type="number" class="form-input" id="ct-duracao">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Forma de Pagamento</label>
                    <select class="form-select" id="ct-formaPag">
                        <option value="">Selecione...</option>
                        <option value="pix">Pix</option>
                        <option value="dinheiro">Dinheiro</option>
                        <option value="cartao">Cart√£o</option>
                        <option value="transferencia">Transfer√™ncia</option>
                    </select>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìÑ Texto do Contrato</div>
                <div class="contrato-texto" id="ct-texto">
                    <p><strong>CONTRATO DE PRESTA√á√ÉO DE SERVI√áOS FISIOTERAP√äUTICOS</strong></p>
                    <p><strong>1) IDENTIFICA√á√ÉO DAS PARTES</strong></p>
                    <p>CONTRATANTE (Paciente/Respons√°vel): <span id="ct-texto-nome"></span></p>
                    <p>CONTRATADO (Fisioterapeuta): <span id="ct-texto-fisio"></span> - CREFITO: <span id="ct-texto-crefito"></span></p>
                    <p><strong>2) OBJETO DO CONTRATO</strong></p>
                    <p>O presente contrato tem como objeto a presta√ß√£o de servi√ßos fisioterap√™uticos ao(√†) paciente identificado(a) acima, mediante avalia√ß√£o, elabora√ß√£o de diagn√≥stico fisioterap√™utico/diagn√≥stico funcional, plano terap√™utico e execu√ß√£o de condutas compat√≠veis com as necessidades do caso.</p>
                    <p><strong>3) CONDI√á√ÉO CL√çNICA</strong></p>
                    <p>Queixa principal e diagn√≥sticos conforme preenchimento acima.</p>
                    <p><strong>4) MODALIDADE E FREQU√äNCIA</strong></p>
                    <p>Modalidade, frequ√™ncia e valores conforme acordo entre as partes.</p>
                    <p><strong>5) O QUE EST√Å INCLUSO</strong></p>
                    <p>‚Ä¢ Avalia√ß√£o fisioterap√™utica inicial (anamnese, exame f√≠sico/funcional e testes pertinentes).<br>
                    ‚Ä¢ Defini√ß√£o de objetivos terap√™uticos e plano de tratamento.<br>
                    ‚Ä¢ Evolu√ß√µes registradas em prontu√°rio e reavalia√ß√µes quando necess√°rio.<br>
                    ‚Ä¢ Orienta√ß√µes domiciliares quando indicadas.</p>
                    <p><strong>6) CANCELAMENTO E FALTAS</strong></p>
                    <p>Cancelamentos devem ser comunicados com anteced√™ncia m√≠nima de 24 horas. Cancelamentos fora do prazo ou faltas poder√£o ser cobrados.</p>
                    <p><strong>7) SIGILO E DADOS</strong></p>
                    <p>As informa√ß√µes cl√≠nicas ser√£o registradas em prontu√°rio e preservadas sob sigilo profissional.</p>
                    <p><strong>8) VIG√äNCIA</strong></p>
                    <p>Este contrato entra em vigor na data de assinatura e permanece v√°lido enquanto houver presta√ß√£o de servi√ßos.</p>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinaturas</div>
                <div class="assinatura-section">
                    <h4>Assinatura do Paciente/Respons√°vel:</h4>
                    <div class="signature-area">
                        <canvas id="ct-assinaturaPaciente" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('ct-paciente')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
                <div class="assinatura-section" style="margin-top: 15px;">
                    <h4>Assinatura do Fisioterapeuta:</h4>
                    <div class="signature-area">
                        <canvas id="ct-assinaturaFisio" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('ct-fisio')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="ct-localData" placeholder="Cidade, DD/MM/AAAA">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarContrato()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFContrato()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppContrato()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA RECIBO -->
        <div id="recibo" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="rc-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="rc-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üí∞ Dados do Recibo</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">N¬∫ do Recibo</label>
                        <input type="text" class="form-input" id="rc-numero">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-input" id="rc-data">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Recebi de (Nome)</label>
                    <input type="text" class="form-input" id="rc-nomePagador">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF/CNPJ</label>
                        <input type="text" class="form-input" id="rc-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" id="rc-valor" step="0.01">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Valor por Extenso</label>
                    <input type="text" class="form-input" id="rc-valorExtenso">
                </div>
                <div class="form-group">
                    <label class="form-label">Referente a</label>
                    <select class="form-select" id="rc-referente">
                        <option value="">Selecione...</option>
                        <option value="sessao">Sess√£o avulsa</option>
                        <option value="pacote">Pacote</option>
                        <option value="avaliacao">Avalia√ß√£o</option>
                        <option value="outro">Outro</option>
                    </select>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Quantidade de Sess√µes</label>
                        <input type="number" class="form-input" id="rc-qtdSessoes">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Per√≠odo/Compet√™ncia</label>
                        <input type="text" class="form-input" id="rc-periodo">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Forma de Pagamento</label>
                    <select class="form-select" id="rc-formaPag">
                        <option value="">Selecione...</option>
                        <option value="pix">Pix</option>
                        <option value="dinheiro">Dinheiro</option>
                        <option value="cartao">Cart√£o</option>
                        <option value="transferencia">Transfer√™ncia</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Chave/Comprovante (opcional)</label>
                    <input type="text" class="form-input" id="rc-comprovante">
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="rc-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('rc')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarRecibo()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFRecibo()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppRecibo()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA TCLE IMAGEM -->
        <div id="tcle-imagem" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="ti-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="ti-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente/Respons√°vel</div>
                <div class="form-group">
                    <label class="form-label">Nome do Paciente</label>
                    <input type="text" class="form-input" id="ti-nomePaciente">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="ti-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-input" id="ti-dataNasc">
                    </div>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Respons√°vel Legal (se aplic√°vel)</label>
                        <input type="text" class="form-input" id="ti-responsavel">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Grau de Parentesco</label>
                        <input type="text" class="form-input" id="ti-parentesco">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üì∏ Autoriza√ß√£o de Uso de Imagem</div>
                <div class="contrato-texto">
                    <p>Eu, <span id="ti-texto-nome"></span>, autorizo, de forma livre e esclarecida, a capta√ß√£o (foto/v√≠deo) e a utiliza√ß√£o de minha imagem/voz (ou do(a) menor sob minha responsabilidade), realizada durante atendimentos/avalia√ß√µes.</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Finalidades (marque todas que aplicar)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" id="ti-registro">
                            <label for="ti-registro">Registro cl√≠nico em prontu√°rio</label>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="ti-educativo">
                            <label for="ti-educativo">Uso educativo/cient√≠fico</label>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="ti-divulgacao">
                            <label for="ti-divulgacao">Divulga√ß√£o em m√≠dias</label>
                        </label>
                    </div>
                </div>
                
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Prefer√™ncia de Anonimiza√ß√£o</label>
                        <select class="form-select" id="ti-anonimizar">
                            <option value="sim">Sim</option>
                            <option value="nao">N√£o</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Identifica√ß√£o Permitida?</label>
                        <select class="form-select" id="ti-identificar">
                            <option value="nao">N√£o</option>
                            <option value="sim">Sim</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o do Uso Pretendido</label>
                    <textarea class="form-input" id="ti-descricao" rows="3"></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinaturas</div>
                <div class="assinatura-section">
                    <h4>Assinatura do Paciente/Respons√°vel:</h4>
                    <div class="signature-area">
                        <canvas id="ti-assinaturaPaciente" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('ti-paciente')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
                <div class="assinatura-section" style="margin-top: 15px;">
                    <h4>Assinatura do Fisioterapeuta:</h4>
                    <div class="signature-area">
                        <canvas id="ti-assinaturaFisio" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('ti-fisio')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="ti-localData">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarTCLEImagem()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFTCLEImagem()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppTCLEImagem()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA TCLE TRATAMENTO -->
        <div id="tcle-tratamento" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="tt-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="tt-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente/Respons√°vel</div>
                <div class="form-group">
                    <label class="form-label">Nome do Paciente</label>
                    <input type="text" class="form-input" id="tt-nomePaciente">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="tt-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-input" id="tt-dataNasc">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Endere√ßo</label>
                    <input type="text" class="form-input" id="tt-endereco">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="text" class="form-input" id="tt-telefone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Respons√°vel Legal (se aplic√°vel)</label>
                        <input type="text" class="form-input" id="tt-responsavel">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Grau de Parentesco</label>
                    <input type="text" class="form-input" id="tt-parentesco">
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìã Termo de Consentimento</div>
                <div class="contrato-texto">
                    <p><strong>1) FINALIDADE DO ATENDIMENTO</strong></p>
                    <p>Declaro que recebi informa√ß√µes claras sobre o atendimento fisioterap√™utico, incluindo avalia√ß√£o, objetivos, plano terap√™utico, alternativas poss√≠veis e o que se espera do processo de reabilita√ß√£o.</p>
                    
                    <p><strong>2) PROCEDIMENTOS E CONDUTAS</strong></p>
                    <p>Fui informado(a) de que poder√£o ser utilizados procedimentos e t√©cnicas compat√≠veis com minha condi√ß√£o cl√≠nica, como exerc√≠cios terap√™uticos, terapia manual, recursos eletrotermofototerap√™uticos, treino funcional, orienta√ß√µes de autocuidado e outras condutas fisioterap√™uticas.</p>
                    
                    <p><strong>3) BENEF√çCIOS ESPERADOS</strong></p>
                    <p>Os benef√≠cios esperados incluem melhora de dor, fun√ß√£o, mobilidade, controle motor, desempenho em atividades di√°rias e/ou preven√ß√£o de agravamentos.</p>
                    
                    <p><strong>4) POSS√çVEIS DESCONFORTOS E RISCOS</strong></p>
                    <p>Fui esclarecido(a) que podem ocorrer desconfortos transit√≥rios, como dor muscular tardia, sensibilidade local, fadiga, tontura leve ou aumento tempor√°rio de sintomas.</p>
                    
                    <p><strong>5) DIREITOS DO(A) PACIENTE</strong></p>
                    <p>‚Ä¢ Tive oportunidade de fazer perguntas e recebi respostas adequadas.<br>
                    ‚Ä¢ Posso recusar ou interromper o atendimento a qualquer momento.<br>
                    ‚Ä¢ Receberei informa√ß√µes sobre minha evolu√ß√£o.<br>
                    ‚Ä¢ Tenho direito ao sigilo e confidencialidade.</p>
                    
                    <p><strong>6) RESPONSABILIDADES</strong></p>
                    <p>Comprometo-me a fornecer informa√ß√µes verdadeiras, comunicar intercorr√™ncias, seguir orienta√ß√µes de seguran√ßa e realizar exerc√≠cios domiciliares quando prescritos.</p>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinaturas</div>
                <div class="assinatura-section">
                    <h4>Assinatura do Paciente/Respons√°vel:</h4>
                    <div class="signature-area">
                        <canvas id="tt-assinaturaPaciente" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('tt-paciente')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
                <div class="assinatura-section" style="margin-top: 15px;">
                    <h4>Assinatura do Fisioterapeuta:</h4>
                    <div class="signature-area">
                        <canvas id="tt-assinaturaFisio" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('tt-fisio')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="tt-localData">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarTCLETratamento()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFTCLETratamento()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppTCLETratamento()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA ATESTADO -->
        <div id="atestado" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="at-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="at-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente</div>
                <div class="form-group">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" class="form-input" id="at-nomePaciente">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="at-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-input" id="at-data">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üè• Informa√ß√µes do Atendimento</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Hor√°rio In√≠cio</label>
                        <input type="time" class="form-input" id="at-horaInicio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Hor√°rio T√©rmino</label>
                        <input type="time" class="form-input" id="at-horaFim">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Necessita de:</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="at-tipo" value="comparecimento" checked>
                            <label>Comparecimento apenas</label>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="at-tipo" value="afastamento">
                            <label>Afastamento</label>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="at-tipo" value="restricao">
                            <label>Restri√ß√£o funcional</label>
                        </label>
                    </div>
                </div>
                <div class="form-group" id="at-diasGroup" style="display:none;">
                    <label class="form-label">Quantidade de Dias</label>
                    <input type="number" class="form-input" id="at-dias">
                </div>
                <div class="form-group">
                    <label class="form-label">Detalhamento (opcional)</label>
                    <textarea class="form-input" id="at-detalhamento" rows="3"></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="at-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('at')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="at-localData">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarAtestado()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFAtestado()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppAtestado()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA REEMBOLSO -->
        <div id="reembolso" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="rb-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="rb-crefito">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">CNPJ/CPF (se aplic√°vel)</label>
                    <input type="text" class="form-input" id="rb-cnpj">
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente</div>
                <div class="form-group">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" class="form-input" id="rb-nomePaciente">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="rb-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-input" id="rb-dataNasc">
                    </div>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Plano/Conv√™nio</label>
                        <input type="text" class="form-input" id="rb-plano">
                    </div>
                    <div class="form-group">
                        <label class="form-label">N¬∫ da Carteirinha</label>
                        <input type="text" class="form-input" id="rb-carteirinha">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üè• Informa√ß√µes Cl√≠nicas</div>
                <div class="form-group">
                    <label class="form-label">Diagn√≥stico M√©dico / CID</label>
                    <input type="text" class="form-input" id="rb-diagnosticoMed">
                </div>
                <div class="form-group">
                    <label class="form-label">Diagn√≥stico Fisioterap√™utico/Funcional</label>
                    <textarea class="form-input" id="rb-diagnosticoFisio" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Objetivos do Tratamento</label>
                    <textarea class="form-input" id="rb-objetivos" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Plano Terap√™utico (frequ√™ncia/dura√ß√£o)</label>
                    <textarea class="form-input" id="rb-planoTerapeutico" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Procedimentos/Condutas Realizados</label>
                    <textarea class="form-input" id="rb-procedimentos" rows="4"></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìä Evolu√ß√£o e Justificativa</div>
                <div class="form-group">
                    <label class="form-label">Evolu√ß√£o do Paciente</label>
                    <textarea class="form-input" id="rb-evolucao" rows="4"></textarea>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Quantidade de Sess√µes</label>
                        <input type="number" class="form-input" id="rb-qtdSessoes">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Per√≠odo (in√≠cio)</label>
                        <input type="date" class="form-input" id="rb-periodoInicio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Per√≠odo (fim)</label>
                        <input type="date" class="form-input" id="rb-periodoFim">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="rb-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('rb')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="rb-localData">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarReembolso()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFReembolso()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppReembolso()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA ALTA -->
        <div id="alta" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="al-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="al-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente</div>
                <div class="form-group">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" class="form-input" id="al-nomePaciente">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="al-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-input" id="al-dataNasc">
                    </div>
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Per√≠odo de Atendimento (In√≠cio)</label>
                        <input type="date" class="form-input" id="al-dataInicio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Per√≠odo de Atendimento (Fim)</label>
                        <input type="date" class="form-input" id="al-dataFim">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Encaminhante / M√©dico (se houver)</label>
                    <input type="text" class="form-input" id="al-encaminhante">
                </div>
                <div class="form-group">
                    <label class="form-label">Diagn√≥stico M√©dico / CID</label>
                    <input type="text" class="form-input" id="al-diagnosticoMed">
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üè• Informa√ß√µes Cl√≠nicas</div>
                <div class="form-group">
                    <label class="form-label">Diagn√≥stico Fisioterap√™utico/Funcional</label>
                    <textarea class="form-input" id="al-diagnosticoFisio" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Condutas Realizadas (s√≠ntese)</label>
                    <textarea class="form-input" id="al-condutas" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Evolu√ß√£o / Resultados</label>
                    <textarea class="form-input" id="al-evolucao" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Condi√ß√£o na Alta e Orienta√ß√µes</label>
                    <textarea class="form-input" id="al-condicao" rows="4"></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìã Motivo da Alta</div>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="al-motivo" value="objetivos" checked>
                        <label>Objetivos terap√™uticos alcan√ßados</label>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="al-motivo" value="solicitacao">
                        <label>Alta por solicita√ß√£o</label>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="al-motivo" value="encaminhamento">
                        <label>Encaminhamento</label>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="al-motivo" value="abandono">
                        <label>Abandono/Descontinuidade</label>
                    </label>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="al-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('al')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="al-localData">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarAlta()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFAlta()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppAlta()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA COMPARECIMENTO -->
        <div id="comparecimento" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="cp-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="cp-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente</div>
                <div class="form-group">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" class="form-input" id="cp-nomePaciente">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="cp-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-input" id="cp-data">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚è∞ Hor√°rio do Atendimento</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Hor√°rio In√≠cio</label>
                        <input type="time" class="form-input" id="cp-horaInicio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Hor√°rio T√©rmino</label>
                        <input type="time" class="form-input" id="cp-horaFim">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="cp-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('cp')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="cp-localData">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarComparecimento()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFComparecimento()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppComparecimento()">üí¨ WhatsApp</button>
            </div>
        </div>

        <!-- ABA ENCAMINHAMENTO -->
        <div id="encaminhamento" class="tab-content">
            <div class="form-card">
                <div class="form-title">üë§ Dados do Profissional</div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Fisioterapeuta</label>
                        <input type="text" class="form-input" id="en-nomeFisio">
                    </div>
                    <div class="form-group">
                        <label class="form-label">CREFITO</label>
                        <input type="text" class="form-input" id="en-crefito">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üë§ Dados do Paciente</div>
                <div class="form-group">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" class="form-input" id="en-nomePaciente">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">CPF</label>
                        <input type="text" class="form-input" id="en-cpf">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-input" id="en-dataNasc">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üè• Destinat√°rio</div>
                <div class="form-group">
                    <label class="form-label">Profissional/Servi√ßo</label>
                    <input type="text" class="form-input" id="en-destinatario">
                </div>
                <div class="prof-row">
                    <div class="form-group">
                        <label class="form-label">Especialidade</label>
                        <input type="text" class="form-input" id="en-especialidade">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Contato</label>
                        <input type="text" class="form-input" id="en-contato">
                    </div>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üìù S√≠ntese Cl√≠nica</div>
                <div class="form-group">
                    <label class="form-label">Queixa Principal / Hist√≥rico Relevante</label>
                    <textarea class="form-input" id="en-queixa" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Achados Funcionais Relevantes</label>
                    <textarea class="form-input" id="en-achados" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Condutas Fisioterap√™uticas J√° Realizadas</label>
                    <textarea class="form-input" id="en-condutas" rows="3"></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">üéØ Motivo do Encaminhamento</div>
                <div class="form-group">
                    <textarea class="form-input" id="en-motivo" rows="4" placeholder="Descreva o motivo do encaminhamento e solicita√ß√£o..."></textarea>
                </div>
            </div>
            
            <div class="form-card">
                <div class="form-title">‚úçÔ∏è Assinatura Digital</div>
                <div class="assinatura-section">
                    <h4>Assine com o dedo na tela abaixo:</h4>
                    <div class="signature-area">
                        <canvas id="en-assinaturaCanvas" class="signature-pad"></canvas>
                        <span class="signature-label">Toque e arraste para assinar</span>
                    </div>
                    <div class="btn-group" style="margin-top: 10px;">
                        <button class="btn btn-danger btn-small" onclick="limparAssinatura('en')">üóëÔ∏è Limpar</button>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Local e Data</label>
                <input type="text" class="form-input" id="en-localData">
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="salvarEncaminhamento()">üíæ Salvar</button>
                <button class="btn btn-success" onclick="gerarPDFEncaminhamento()">üìÑ PDF</button>
                <button class="btn btn-whatsapp" onclick="enviarWhatsAppEncaminhamento()">üí¨ WhatsApp</button>
            </div>
        </div>

        <div class="footer">
            <p>ASM Gest√£o Cl√≠nica - Uso Licenciado</p>
            <p>¬© Dra. Andresa Augusto Nascimento</p>
            <p>Proibida reprodu√ß√£o ou compartilhamento sem autoriza√ß√£o</p>
        </div>
    </div>
    
    <div id="toast" class="toast"></div>

    <script>
        // VARI√ÅVEIS GLOBAIS
        let nivelDorSelecionado = null;
        let assinaturas = {};
        let pacientes = JSON.parse(localStorage.getItem('asm_pacientes') || '[]');
        
        // INICIALIZA√á√ÉO
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar datas
            document.querySelectorAll('input[type="date"]').forEach(input => {
                if (!input.value) input.valueAsDate = new Date();
            });
            
            // Inicializar canvas de assinatura
            setTimeout(() => {
                initAllCanvases();
                gerarCamposEvolucao();
            }, 100);
            
            // Carregar dados do fisioterapeuta
            carregarDadosFisio();
        });
        
        // NAVEGA√á√ÉO DE ABAS
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Re-inicializar canvas quando mudar de aba
            setTimeout(() => {
                initAllCanvases();
            }, 100);
        }
        
        // INICIALIZAR TODOS OS CANVAS
        function initAllCanvases() {
            const canvasIds = [
                'av-assinaturaCanvas',
                'ev-assinaturaCanvas',
                'ct-assinaturaPaciente', 'ct-assinaturaFisio',
                'rc-assinaturaCanvas',
                'ti-assinaturaPaciente', 'ti-assinaturaFisio',
                'tt-assinaturaPaciente', 'tt-assinaturaFisio',
                'at-assinaturaCanvas',
                'rb-assinaturaCanvas',
                'al-assinaturaCanvas',
                'cp-assinaturaCanvas',
                'en-assinaturaCanvas'
            ];
            
            canvasIds.forEach(id => {
                const canvas = document.getElementById(id);
                if (canvas && !assinaturas[id]) {
                    initCanvas(id);
                }
            });
        }
        
        function initCanvas(canvasId) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const container = canvas.parentElement;
            
            canvas.width = container.offsetWidth - 4;
            canvas.height = 150;
            
            ctx.strokeStyle = '#1e3a5f';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            let isDrawing = false;
            
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - rect.left;
                const y = (e.clientY || e.touches[0].clientY) - rect.top;
                ctx.beginPath();
                ctx.moveTo(x, y);
                canvas.parentElement.querySelector('.signature-label').style.display = 'none';
            }
            
            function draw(e) {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - rect.left;
                const y = (e.clientY || e.touches[0].clientY) - rect.top;
                ctx.lineTo(x, y);
                ctx.stroke();
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDrawing(e); }, {passive: false});
            canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); }, {passive: false});
            canvas.addEventListener('touchend', stopDrawing);
            
            assinaturas[canvasId] = { canvas, ctx, hasSignature: false };
        }
        
        function limparAssinatura(prefixo) {
            const ids = {
                'av': ['av-assinaturaCanvas'],
                'ev': ['ev-assinaturaCanvas'],
                'ct-paciente': ['ct-assinaturaPaciente'],
                'ct-fisio': ['ct-assinaturaFisio'],
                'rc': ['rc-assinaturaCanvas'],
                'ti-paciente': ['ti-assinaturaPaciente'],
                'ti-fisio': ['ti-assinaturaFisio'],
                'tt-paciente': ['tt-assinaturaPaciente'],
                'tt-fisio': ['tt-assinaturaFisio'],
                'at': ['at-assinaturaCanvas'],
                'rb': ['rb-assinaturaCanvas'],
                'al': ['al-assinaturaCanvas'],
                'cp': ['cp-assinaturaCanvas'],
                'en': ['en-assinaturaCanvas']
            };
            
            (ids[prefixo] || []).forEach(id => {
                if (assinaturas[id]) {
                    const { canvas, ctx } = assinaturas[id];
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    assinaturas[id].hasSignature = false;
                    canvas.parentElement.querySelector('.signature-label').style.display = 'block';
                }
            });
        }
        
        // FUN√á√ïES DE DOR E CAPTORES
        function selecionarDor(elemento) {
            document.querySelectorAll('.numero-dor').forEach(el => el.classList.remove('selected'));
            elemento.classList.add('selected');
            nivelDorSelecionado = elemento.getAttribute('data-valor');
        }
        
        function toggleDor(botao) {
            const container = botao.parentElement;
            container.querySelectorAll('.btn-dor').forEach(btn => {
                btn.classList.remove('selected-com-dor', 'selected-sem-dor');
            });
            if (botao.textContent.includes('Com')) {
                botao.classList.add('selected-com-dor');
            } else {
                botao.classList.add('selected-sem-dor');
            }
        }
        
        function toggleCaptor(botao, tipo) {
            const container = botao.parentElement;
            container.querySelectorAll('.btn-captor').forEach(btn => {
                btn.classList.remove('selected-positivo', 'selected-negativo');
            });
            if (tipo === 'positivo') {
                botao.classList.add('selected-positivo');
            } else {
                botao.classList.add('selected-negativo');
            }
        }
        
        // GERAR CAMPOS DE EVOLU√á√ÉO
        function gerarCamposEvolucao() {
            const container = document.getElementById('ev-evolucoes');
            if (!container) return;
            
            let html = '';
            for (let i = 1; i <= 10; i++) {
                html += `
                    <div class="form-card">
                        <div class="form-title">üìù Evolu√ß√£o ${i}</div>
                        <div class="evolucao-item">
                            <div class="evolucao-header">
                                <label class="form-label" style="margin:0;white-space:nowrap;">Data:</label>
                                <input type="date" class="form-input" id="ev-data${i}">
                            </div>
                            <textarea class="form-input" id="ev-texto${i}" rows="4" placeholder="Descreva a evolu√ß√£o do paciente..."></textarea>
                        </div>
                    </div>
                `;
            }
            container.innerHTML = html;
        }
        
        // BUSCAR PACIENTE
        function buscarPaciente() {
            const busca = document.getElementById('ev-busca').value.toLowerCase();
            const lista = document.getElementById('ev-listaPacientes');
            
            if (busca.length < 2) {
                lista.innerHTML = '';
                return;
            }
            
            const filtrados = pacientes.filter(p => p.nome.toLowerCase().includes(busca));
            
            if (filtrados.length === 0) {
                lista.innerHTML = '<div class="paciente-item" onclick="novoPaciente()">+ Cadastrar novo paciente</div>';
            } else {
                lista.innerHTML = filtrados.map(p => `
                    <div class="paciente-item" onclick="selecionarPaciente('${p.nome}')">
                        ${p.nome} - ${p.cpf || 'Sem CPF'}
                    </div>
                `).join('');
            }
        }
        
        function novoPaciente() {
            document.getElementById('ev-dadosPaciente').style.display = 'block';
            document.getElementById('ev-nomePaciente').value = document.getElementById('ev-busca').value;
            document.getElementById('ev-listaPacientes').innerHTML = '';
        }
        
        function selecionarPaciente(nome) {
            const paciente = pacientes.find(p => p.nome === nome);
            if (paciente) {
                document.getElementById('ev-dadosPaciente').style.display = 'block';
                document.getElementById('ev-nomePaciente').value = paciente.nome;
                document.getElementById('ev-cpf').value = paciente.cpf || '';
                document.getElementById('ev-idade').value = paciente.idade || '';
                document.getElementById('ev-profissao').value = paciente.profissao || '';
                document.getElementById('ev-telefone').value = paciente.telefone || '';
                document.getElementById('ev-endereco').value = paciente.endereco || '';
                document.getElementById('ev-diagnostico').value = paciente.diagnostico || '';
                document.getElementById('ev-dataInicio').value = paciente.dataInicio || '';
            }
            document.getElementById('ev-listaPacientes').innerHTML = '';
        }
        
        // CARREGAR/SALVAR DADOS DO FISIOTERAPEUTA
        function carregarDadosFisio() {
            const dados = JSON.parse(localStorage.getItem('asm_dados_fisio') || '{}');
            if (dados.nomeFisio) {
                document.querySelectorAll('[id$="nomeFisio"]').forEach(el => {
                    if (el) el.value = dados.nomeFisio;
                });
            }
            if (dados.crefito) {
                document.querySelectorAll('[id$="crefito"]').forEach(el => {
                    if (el) el.value = dados.crefito;
                });
            }
        }
        
        function salvarDadosFisio() {
            const nomeFisio = document.getElementById('av-nomeFisio')?.value || 
                             document.getElementById('ct-nomeFisio')?.value || '';
            const crefito = document.getElementById('av-crefito')?.value || 
                           document.getElementById('ct-crefito')?.value || '';
            
            if (nomeFisio) {
                localStorage.setItem('asm_dados_fisio', JSON.stringify({ nomeFisio, crefito }));
            }
        }
        
        // TOAST
        function mostrarToast(mensagem) {
            const toast = document.getElementById('toast');
            toast.textContent = mensagem;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
        
        // FUN√á√ïES DE SALVAR
        function salvarAvaliacao() {
            salvarDadosFisio();
            const dados = coletarDadosAvaliacao();
            localStorage.setItem('asm_avaliacao_' + Date.now(), JSON.stringify(dados));
            mostrarToast('‚úÖ Avalia√ß√£o salva com sucesso!');
        }
        
        function salvarEvolucao() {
            const dados = {
                nome: document.getElementById('ev-nomePaciente').value,
                cpf: document.getElementById('ev-cpf').value,
                idade: document.getElementById('ev-idade').value,
                profissao: document.getElementById('ev-profissao').value,
                telefone: document.getElementById('ev-telefone').value,
                endereco: document.getElementById('ev-endereco').value,
                diagnostico: document.getElementById('ev-diagnostico').value,
                dataInicio: document.getElementById('ev-dataInicio').value,
                evolucoes: []
            };
            
            for (let i = 1; i <= 10; i++) {
                dados.evolucoes.push({
                    data: document.getElementById('ev-data' + i)?.value,
                    texto: document.getElementById('ev-texto' + i)?.value
                });
            }
            
            // Atualizar ou adicionar paciente
            const idx = pacientes.findIndex(p => p.nome === dados.nome);
            if (idx >= 0) {
                pacientes[idx] = dados;
            } else {
                pacientes.push(dados);
            }
            localStorage.setItem('asm_pacientes', JSON.stringify(pacientes));
            
            mostrarToast('‚úÖ Evolu√ß√£o salva com sucesso!');
        }
        
        function salvarContrato() {
            salvarDadosFisio();
            mostrarToast('‚úÖ Contrato salvo com sucesso!');
        }
        
        function salvarRecibo() {
            salvarDadosFisio();
            mostrarToast('‚úÖ Recibo salvo com sucesso!');
        }
        
        function salvarTCLEImagem() {
            salvarDadosFisio();
            mostrarToast('‚úÖ TCLE Imagem salvo com sucesso!');
        }
        
        function salvarTCLETratamento() {
            salvarDadosFisio();
            mostrarToast('‚úÖ TCLE Tratamento salvo com sucesso!');
        }
        
        function salvarAtestado() {
            salvarDadosFisio();
            mostrarToast('‚úÖ Atestado salvo com sucesso!');
        }
        
        function salvarReembolso() {
            salvarDadosFisio();
            mostrarToast('‚úÖ Relat√≥rio de reembolso salvo com sucesso!');
        }
        
        function salvarAlta() {
            salvarDadosFisio();
            mostrarToast('‚úÖ Relat√≥rio de alta salvo com sucesso!');
        }
        
        function salvarComparecimento() {
            salvarDadosFisio();
            mostrarToast('‚úÖ Declara√ß√£o de comparecimento salva com sucesso!');
        }
        
        function salvarEncaminhamento() {
            salvarDadosFisio();
            mostrarToast('‚úÖ Encaminhamento salvo com sucesso!');
        }
        
        // COLETAR DADOS
        function coletarDadosAvaliacao() {
            return {
                fisioterapeuta: {
                    nome: document.getElementById('av-nomeFisio').value,
                    crefito: document.getElementById('av-crefito').value
                },
                paciente: {
                    nome: document.getElementById('av-nomePaciente').value,
                    idade: document.getElementById('av-idade').value,
                    data: document.getElementById('av-dataAvaliacao').value,
                    profissao: document.getElementById('av-profissao').value
                },
                queixaPrincipal: document.getElementById('av-queixaPrincipal').value,
                nivelDor: nivelDorSelecionado,
                dataCriacao: new Date().toISOString()
            };
        }
        
        // GERAR PDFs
        async function gerarPDFAvaliacao() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const nome = document.getElementById('av-nomePaciente').value || 'Paciente';
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Ficha de Avalia√ß√£o Fisioterap√™utica', 105, 25, { align: 'center' });
            
            let y = 45;
            
            doc.setTextColor(30, 58, 95);
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            doc.text('PROFISSIONAL', 10, y);
            y += 7;
            doc.setFont(undefined, 'normal');
            doc.setFontSize(10);
            doc.text(`Nome: ${document.getElementById('av-nomeFisio').value || ''}`, 10, y);
            y += 6;
            doc.text(`CREFITO: ${document.getElementById('av-crefito').value || ''}`, 10, y);
            y += 10;
            
            doc.setFont(undefined, 'bold');
            doc.text('PACIENTE', 10, y);
            y += 7;
            doc.setFont(undefined, 'normal');
            doc.text(`Nome: ${nome}`, 10, y);
            y += 6;
            doc.text(`Idade: ${document.getElementById('av-idade').value || ''} anos`, 10, y);
            y += 10;
            
            if (assinaturas['av-assinaturaCanvas']?.hasSignature) {
                const imgData = assinaturas['av-assinaturaCanvas'].canvas.toDataURL('image/png');
                doc.addImage(imgData, 'PNG', 10, y, 80, 30);
            }
            
            doc.setFontSize(8);
            doc.setTextColor(100, 100, 100);
            doc.text('ASM Gest√£o Cl√≠nica - Uso Licenciado', 105, 285, { align: 'center' });
            doc.text('¬© Dra. Andresa Augusto Nascimento - Proibida reprodu√ß√£o sem autoriza√ß√£o', 105, 290, { align: 'center' });
            
            doc.save(`Avaliacao_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFEvolucao() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const nome = document.getElementById('ev-nomePaciente').value || 'Paciente';
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Ficha de Evolu√ß√£o Fisioterap√™utica', 105, 25, { align: 'center' });
            
            doc.save(`Evolucao_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFContrato() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Contrato de Presta√ß√£o de Servi√ßos', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('ct-nomeContratante').value || 'Contrato';
            doc.save(`Contrato_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFRecibo() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Recibo de Pagamento', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('rc-nomePagador').value || 'Recibo';
            doc.save(`Recibo_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFTCLEImagem() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('TCLE - Consentimento para Uso de Imagem', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('ti-nomePaciente').value || 'TCLE_Imagem';
            doc.save(`TCLE_Imagem_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFTCLETratamento() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('TCLE - Termo de Consentimento para Tratamento', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('tt-nomePaciente').value || 'TCLE_Tratamento';
            doc.save(`TCLE_Tratamento_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFAtestado() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Atestado Fisioterap√™utico', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('at-nomePaciente').value || 'Atestado';
            doc.save(`Atestado_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFReembolso() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Relat√≥rio para Conv√™nio/Reembolso', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('rb-nomePaciente').value || 'Reembolso';
            doc.save(`Reembolso_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFAlta() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Relat√≥rio de Alta Fisioterap√™utica', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('al-nomePaciente').value || 'Alta';
            doc.save(`Alta_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFComparecimento() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Declara√ß√£o de Comparecimento', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('cp-nomePaciente').value || 'Comparecimento';
            doc.save(`Comparecimento_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        async function gerarPDFEncaminhamento() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFillColor(30, 58, 95);
            doc.rect(0, 0, 210, 35, 'F');
            doc.setTextColor(201, 162, 39);
            doc.setFontSize(18);
            doc.text('ASM Gest√£o Cl√≠nica', 105, 15, { align: 'center' });
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.text('Encaminhamento Profissional', 105, 25, { align: 'center' });
            
            const nome = document.getElementById('en-nomePaciente').value || 'Encaminhamento';
            doc.save(`Encaminhamento_${nome}.pdf`);
            mostrarToast('üìÑ PDF gerado com sucesso!');
        }
        
        // WHATSAPP
        function enviarWhatsAppAvaliacao() {
            const nome = document.getElementById('av-nomePaciente').value || 'Paciente';
            const fisio = document.getElementById('av-nomeFisio').value || 'Fisioterapeuta';
            const msg = `*Ficha de Avalia√ß√£o - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0AFisioterapeuta: ${fisio}%0A%0AAvalia√ß√£o realizada com sucesso!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppEvolucao() {
            const nome = document.getElementById('ev-nomePaciente').value || 'Paciente';
            const msg = `*Ficha de Evolu√ß√£o - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0AEvolu√ß√£o registrada!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppContrato() {
            const nome = document.getElementById('ct-nomeContratante').value || 'Contratante';
            const msg = `*Contrato de Presta√ß√£o de Servi√ßos - ASM Gest√£o Cl√≠nica*%0A%0AContratante: ${nome}%0A%0AContrato dispon√≠vel!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppRecibo() {
            const nome = document.getElementById('rc-nomePagador').value || 'Cliente';
            const valor = document.getElementById('rc-valor').value || '0,00';
            const msg = `*Recibo de Pagamento - ASM Gest√£o Cl√≠nica*%0A%0ARecebido de: ${nome}%0AValor: R$ ${valor}%0A%0AObrigado!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppTCLEImagem() {
            const nome = document.getElementById('ti-nomePaciente').value || 'Paciente';
            const msg = `*TCLE Uso de Imagem - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0AConsentimento registrado!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppTCLETratamento() {
            const nome = document.getElementById('tt-nomePaciente').value || 'Paciente';
            const msg = `*TCLE Tratamento - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0AConsentimento para tratamento registrado!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppAtestado() {
            const nome = document.getElementById('at-nomePaciente').value || 'Paciente';
            const msg = `*Atestado Fisioterap√™utico - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0AAtestado dispon√≠vel!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppReembolso() {
            const nome = document.getElementById('rb-nomePaciente').value || 'Paciente';
            const msg = `*Relat√≥rio para Reembolso - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0ARelat√≥rio dispon√≠vel!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppAlta() {
            const nome = document.getElementById('al-nomePaciente').value || 'Paciente';
            const msg = `*Relat√≥rio de Alta - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0AAlta registrada!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppComparecimento() {
            const nome = document.getElementById('cp-nomePaciente').value || 'Paciente';
            const msg = `*Declara√ß√£o de Comparecimento - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0ADeclara√ß√£o dispon√≠vel!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        function enviarWhatsAppEncaminhamento() {
            const nome = document.getElementById('en-nomePaciente').value || 'Paciente';
            const msg = `*Encaminhamento Profissional - ASM Gest√£o Cl√≠nica*%0A%0APaciente: ${nome}%0A%0AEncaminhamento dispon√≠vel!`;
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
        
        // REDIMENSIONAR
        window.addEventListener('resize', () => {
            setTimeout(initAllCanvases, 100);
        });
        
        // Radio buttons para atestado
        document.querySelectorAll('input[name="at-tipo"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.getElementById('at-diasGroup').style.display = 
                    this.value === 'afastamento' ? 'block' : 'none';
            });
        });
    </script>
</body>
</html>
